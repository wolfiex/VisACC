
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"/>
<link href="index.css" rel="stylesheet"/>
<link href="photon.min.css" rel="stylesheet"/>


<div id='input'>

  <form action="upload.php"  method="POST">
    <input id ='files' type="file" multiple>
    <p>Drag your .nc files here or click in this area.</p>

  </form>
  <button class='inbtn btn btn-primary'>View Example</button>
  <link rel="stylesheet" type="text/css" href='upload.css'/>
  <div id='meterdiv' class="meter">
    <span id ='loading' style="width: 50%"></span>
  </div>
</div>


<div id='ropaelements' hidden=true class="tri-down">
<form>
  <div class="top">
    <div style="float: left; width: 20%;">
      <select class="form-control" id='dropdown'
      onchange='window.location.hash=value;spec = value; draw(spec,document.getElementById("valueslider").value);miniplot(spec)'> </select>
<br>
      <button class ='btn btn-positive' id='animate' onclick='window.animate()' style='width: 85%;margin-top:8px;height:23px;' >Animate</button>
    </div>
</form>

    <div style="float: left; width: 5%;"><br>
    </div>
    <div style="float: left; width: 50%;">
      <form>
        <input type="range" id="valueslider" value="0" step="1" min="0" max="500"   style='width: 100%;
        display: block;  margin: 0 auto;'   oninput="document.getElementById('output').value=ncdata.datetime[value]"
        onchange='draw(spec,value)'>
        <svg id='miniplot' style='width: 90%; display: block; position:absolute; margin: 0 auto;'></svg>
      </form>
      <br>
      <svg id='miniplots' style='width: 100%; display: block; position:absolute; margin: 0 auto;'>
        <defs>
          <pattern id="pattern-stripe"
          width="4" height="4"
          patternUnits="userSpaceOnUse"
          patternTransform="rotate(45)">
          <rect width="2" height="4" transform="translate(0,0)" fill="white"></rect>
        </pattern>
        <mask id="mask">
          <rect x="0" y="0" width="800%" height="800%" fill="url(#pattern-stripe)" />
        </mask>
      </defs>

    </svg>
  </div>
  <div style="float: left; width: 5%;"> <br>
  </div>
  <div style="float: left; width: 20%;">
    <output form=value id="output">0</output>
  </div>



  <div style='padding-top:55px;'>
    <button class='btn btn-primary' id='store' onclick="save('Ropa_'+spec+'_'+(document.getElementById('output').innerHTML.replace(/\s/g,'_').split('_GMT')[0]).replace(/\-/,'').replace(/1970/,''))" style='width: 100%;position:relative' >Save</button>
  </div>

</div>




<script src="http://d3js.org/d3.v4.min.js"></script>
<script src="./netcdfjs.min.js"></script>
<script src="./readncdf.js"></script>
<script src="./functions.js"></script>
<script src="./index.js"></script>
<script src="./save.js"></script>


<script>
"use strict";

document.getElementById('meterdiv').style.opacity= 0;

var spec = (window.location.hash==='')?"NO":window.location.hash.replace('#','');
var timestep = 99;
var data = [];
var topten = true
var topn = 6;

// set the dimensions and margins of the graph
var margin = { top: 20, right: 100, bottom: 70, left: 100 },
  width = window.innerWidth - margin.left - margin.right,
  height = window.innerHeight / 2; // - margin.top - margin.bottom - 35;

var svg = d3
  .select("body")
  .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var format = d3.format(".1");
var tooltip = d3.select("body").append("div").attr("class", "toolTip");
//initial;


</script>

<script src='upload.js'></script>
